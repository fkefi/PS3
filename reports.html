<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <title>Αναφορά Email με Πλαίσιο</title>
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="style_menu.css">
  <style>
    body {
      margin: 0;
      padding: 0;
      display: flex;
      min-height: 100vh;
      background-color: white;
    }

    /* Στυλ για το κύριο περιεχόμενο */
    .main-content {
      width: calc(100% - 270px);
      padding: 20px;
      background-color: white;
      margin-left: 270px;
      min-height: 100vh;
      box-sizing: border-box;
    }

    /* Στυλ για το πλαίσιο δεξιά */
    .report-section {
      width: calc(100% - 270px);
      padding: 20px;
      background-color: white;
      border: 2px solid #ccc;
      border-radius: 10px;
      margin-left: 270px;
      margin-top: 20px;
      box-sizing: border-box;
      max-width: none;
      position: relative;
      left: 0;
      right: 0;
    }

    /* Make the chart wider */
    #depositChart {
      width: 100% !important;
      max-width: 800px;
      margin: 0 auto;
    }

    /* Rest of your existing styles... */
    .top-bar {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
    }

    .email-input {
      padding: 5px;
      width: 200px;
      font-size: 14px;
    }

    .filter-bar {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }

    .filter-bar select, .filter-bar input {
      padding: 5px;
      font-size: 14px;
    }

    .file-list {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }

    .file-button {
      display: flex;
      justify-content: space-between;
      background-color: #f0f0f0;
      padding: 10px;
      border-radius: 5px;
    }

    .file-button:hover {
      background-color: #e0e0e0;
    }

    .btn-group button {
      padding: 5px 10px;
      font-size: 14px;
      cursor: pointer;
    }

    .section-header h2 {
      margin-bottom: 20px;
    }

    /* Σχόλια και εικόνα πίτας */
    .comments-section {
      margin-top: 40px;
      text-align: center;
    }

    .comments-section textarea {
      width: 80%;
      height: 100px;
      padding: 10px;
      font-size: 16px;
      border: 1px solid #ccc;
    }

    .download-btn {
      padding: 10px 15px;
      background-color: orange;
      border: none;
      color: white;
      cursor: pointer;
      font-size: 14px;
    }

    .download-btn:hover {
      background-color: darkorange;
    }

    /* Σχεδίαση πίτας */
    canvas {
      display: block;
      margin: 0 auto;
    }

    /* Στυλ για κουμπί κάτω αριστερά */
    .bottom-left-btn {
      padding: 10px 15px;
      font-size: 14px;
      background-color: #f0f0f0;
      border: 1px solid #ccc;
      cursor: pointer;
      margin-top: 20px;
    }

    .bottom-left-btn:hover {
      background-color: #e0e0e0;
    }
  </style>
</head>
<body>
  <div class="sidebar">
    <!-- Menu will be generated by menu.js -->
  </div>

  <!-- Κύριο περιεχόμενο -->
  <div class="main-content">
    <div class="top-bar">
      <label for="ceo-email">Προς: CEO</label>
      <input type="text" id="ceo-email" class="email-input" value="ceo@company.com" readonly>
    </div>

    <!-- Filter Bar -->
    <div class="filter-bar">
      <label style="align-self: center; font-weight: bold;">Μήνας / Έτος:</label>
      
      <select>
        <option value="01">Ιανουάριος</option>
        <option value="02">Φεβρουάριος</option>
        <option value="03">Μάρτιος</option>
        <option value="04">Απρίλιος</option>
        <option value="05">Μάιος</option>
        <option value="06">Ιούνιος</option>
        <option value="07">Ιούλιος</option>
        <option value="08">Αύγουστος</option>
        <option value="09">Σεπτέμβριος</option>
        <option value="10">Οκτώβριος</option>
        <option value="11">Νοέμβριος</option>
        <option value="12">Δεκέμβριος</option>
      </select>
      
      <select>
        <option value="2025">2025</option>
        <option value="2024">2024</option>
        <option value="2023">2023</option>
        <option value="2022">2022</option>
        <option value="2021">2021</option>
        <option value="2020">2020</option>
      </select>
      
      <input type="text" class="search-box" placeholder="search">
    </div>

    <div class="section-header">
      <h2>Αρχεία Reports</h2>
    </div>

    <div class="file-list">
      <div class="file-button">
        <div class="file-content"><span class="file-icon">📄</span>Report Απρίλιος 2025</div>
        <div class="btn-group">
          <button class="view-btn">View</button>
          <button class="download-btn">Download</button>
        </div>
      </div>
      <div class="file-button">
        <div class="file-content"><span class="file-icon">📄</span>Report Μάρτιος 2025</div>
        <div class="btn-group">
          <button class="view-btn">View</button>
          <button class="download-btn">Download</button>
        </div>
      </div>
      <div class="file-button">
        <div class="file-content"><span class="file-icon">📄</span>Report Φεβρουάριος 2025</div>
        <div class="btn-group">
          <button class="view-btn">View</button>
          <button class="download-btn">Download</button>
        </div>
      </div>
      <div class="file-button">
        <div class="file-content"><span class="file-icon">📄</span>Report Ιανουάριος 2025</div>
        <div class="btn-group">
          <button class="view-btn">View</button>
          <button class="download-btn">Download</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Σχεδίαση πίτας και αναφορά -->
  <div class="report-section">
    <!-- Επικεφαλίδα Email -->
    <div class="email-header">
      <div class="left">Προς: CEO &lt;emailofCEO@gmail.com&gt;</div>
      <div class="right">
        <button class="star-btn" title="Αγαπημένο">⭐</button>
        <button class="forward-btn">Προώθηση</button>
      </div>
    </div>

    <!-- Τίτλος Αναφοράς -->
    <h2>REPORTS ΚΑΤΑΘΕΣΕΩΝ ΓΙΑ ΤΟ ΜΗΝΑ ΑΠΡΙΛΙΟΣ 2025</h2>

    <!-- Σχεδίαση πίτας -->
    <canvas id="depositChart" width="400" height="400"></canvas>
    <div id="totalDeposits" style="text-align: center; margin-top: 20px; font-size: 20px; font-weight: bold;"></div>

    <!-- Επιλογή για Download -->
    <button class="download-btn" id="downloadBtn">Κατέβασμα ως Εικόνα ή PDF</button>

    <!-- Σχόλια / Παρατηρήσεις -->
    <div class="comments-section">
      <h3>Σχόλια ή Παρατηρήσεις</h3>
      <textarea id="comments" placeholder="Άφησε το σχόλιό σου εδώ..."></textarea>
    </div>

    <!-- Κουμπί "Περισσότερες Πληροφορίες για Καταθέσεις" μέσα στο δεξί πλαίσιο -->
    <button class="bottom-left-btn">ΠΕΡΙΣΣΟΤΕΡΕΣ ΠΛΗΡΟΦΟΡΙΕΣ ΚΑΤΑΘΕΣΕΩΝ</button>
  </div>

  <!-- Chart.js, html2canvas, jsPDF Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="menu.js"></script>
  <script>
    // Create the Pie chart
    var ctx = document.getElementById('depositChart').getContext('2d');
    var depositChart = new Chart(ctx, {
      type: 'pie',
      data: {
        labels: ['Εθνική', 'Eurobank', 'Alpha Bank', 'Πειραιώς'],
        datasets: [{
          label: 'Καταθέσεις',
          data: [1200.00, 750.50, 2300.00, 980.00],
          backgroundColor: ['#e6194b', '#4363d8', '#3cb44b', '#911eb4'],
          borderColor: '#ffffff',
          borderWidth: 2
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: {
            position: 'bottom'
          },
          tooltip: {
            callbacks: {
              label: function(tooltipItem) {
                return tooltipItem.label + ': ' + tooltipItem.raw + '€';
              }
            }
          }
        }
      }
    });

    // Show total deposits
    const total = [1200.00, 750.50, 2300.00, 980.00].reduce((acc, val) => acc + val, 0);
    document.getElementById('totalDeposits').innerText = `Συνολικό Ποσό Καταθέσεων: €${total.toFixed(2)}`;

    // Download chart as image or PDF
    document.getElementById('downloadBtn').addEventListener('click', function() {
      html2canvas(document.querySelector('#depositChart')).then(function(canvas) {
        const imgData = canvas.toDataURL('image/png');
        const pdf = new jsPDF();
        pdf.addImage(imgData, 'PNG', 10, 10, 180, 180);
        pdf.save('deposit_report.pdf');
      });
    });

    // Handle click on pie chart slices
    depositChart.options.onClick = function(e) {
      var activePoints = depositChart.getElementsAtEventForMode(e, 'nearest', { intersect: true }, true);
      if (activePoints.length) {
        var clickedIndex = activePoints[0].index;
        var labels = depositChart.data.labels;
        alert(`Τράπεζα: ${labels[clickedIndex]} - Καταθέσεις: €${depositChart.data.datasets[0].data[clickedIndex]}`);
      }
    };
  </script>
</body>
</html>